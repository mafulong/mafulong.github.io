<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="wVZecs0Awis41AZhX45RBAUlyk3nnpoOkebdIemwhxQ" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>AWS Cloudformation And CDK &mdash; Fulongのblog</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/github.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="https://mafulong.github.io/2023/02/10/AWS-Cloudformation-And-CDK/"><link rel="alternate" type="application/atom+xml" title="Fulongのblog" href="https://mafulong.github.io"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/favicon.ico"><meta property="og:title" content="AWS Cloudformation And CDK"><meta name="keywords" content="logbook, mafulong"><meta name="og:keywords" content="logbook, mafulong"><meta name="description" content="AWS Cloudformation"><meta name="og:description" content="AWS Cloudformation"><meta property="og:url" content="https://mafulong.github.io/2023/02/10/AWS-Cloudformation-And-CDK/"><meta property="og:site_name" content="Fulongのblog"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2023-02-10"> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://mafulong.github.io/" title="Fulongのblog"><span class="octicon octicon-mark-github"></span> Fulongのblog</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://mafulong.github.io/" class=" site-header-nav-item" target="" title="Home">Home</a> <a href="https://mafulong.github.io/categories/" class=" site-header-nav-item" target="" title="Categories">Categories</a> <a href="https://mafulong.github.io/archives/" class=" site-header-nav-item" target="" title="Achieves">Achieves</a> <a href="https://mafulong.github.io/open-source" class=" site-header-nav-item" target="" title="Open-Source">Open-Source</a> <a href="https://mafulong.github.io/bookmark" class=" site-header-nav-item" target="" title="Bookmark">Bookmark</a> <a href="https://mafulong.github.io/about" class=" site-header-nav-item" target="" title="About">About</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="AWS Cloudformat"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">AWS Cloudformation And CDK</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2023/02/10 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://mafulong.github.io/categories/#AWS" title="AWS">AWS</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 4086 字，约 12 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h1 id="aws-cloudformation">AWS Cloudformation</h1><p>cloudFormation以yaml文本的形式记录下一个应用涉及到的各个服务资源配置，放在一个template里面。迁移到不同的region时，只需要一键run coudFormation template, 就可以部署好所有的AWS资源。</p><p>也叫AWS 堆栈</p><h2 id="为什么使用-cloudformation">为什么使用 CloudFormation？</h2><p><strong>基础设施即代码：</strong>CloudFormation 使我们只用一个步骤就可以创建一个“资源堆栈”。资源是我们创建的东西（EC2 实例、VPC、子网等等），一组这样的资源称为堆栈。我们可以编写一个模板，使用它可以很容易地按照我们的意愿通过一个步骤创建一个网络堆栈。这比通过管理控制台或 CLI 手动创建网络更快，而且可重复，一致性更好。我们可以将模板签入源代码控制，并在任何时候根据需要把它用于任何目的。</p><p><strong>可升级：</strong>我们可以通过修改 CloudFormation 模板来修改网络堆栈，然后根据修改后的模板修改堆栈。CloudFormation 足够智能，可以通过修改堆栈来匹配模板。</p><p><strong>可重用</strong>：我们可以重用这个模板，在不同时期、不同区域创建多个不用用途的网络。</p><p><strong>漂移检测：</strong>CloudFormation 有一个新特性（截止到 2018 年 11 月），可以让我们知道资源是否已经“漂移”出了最初的配置。这可能发生在管理员手动更改资源时，这通常不是成熟的组织所鼓励的做法。</p><p><strong>用完即弃：</strong>我们很容易在用完之后把堆栈删除。</p><h2 id="使用">使用</h2><p>CloudFormation 支持 JSON 或 YAML，我们将使用后者。主要原因是：1）句法不那么讲究，2）能够在工作中添加注释</p><p>比如一个<a href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc.html">VPC示例</a></p><p>然后AWS控制台。 登录，选择任何区域。在菜单中找到 CloudFormation，如果需要的话，使用搜索功能。登入后，点击“创建堆栈”。选择“上传你自己的模板”选项，然后单击“下一步”。就可以创建堆栈了，还可以看到事件和资源。</p><p>这些事件将显示你的 VPC 是在什么时候创建的，以及它是在什么时候成功创建的。当堆栈中的最后一个资源被创建时，堆栈的状态将更改为已成功创建。</p><p>有一个重要的概念需要注意，如果在创建堆栈时遇到任何错误，整个堆栈（所有资源）将回滚。这种行为可以被重写，但通常这样就行！通常情况下，从头开始执行每一步要容易得多。</p><p>如果堆栈失败，它仍然会显示在堆栈列表中，即使堆栈中没有资源。这样做是为了给你时间来调查错误。确定问题后，使用“删除堆栈”操作。</p><h2 id="参考">参考</h2><ul><li><p><a href="https://juejin.cn/post/7122039768124227614">AWS CloudFormation简介</a></p></li><li><p><a href="https://www.infoq.cn/article/hsaedm*2we5jmh9tfjeg">如何使用 CloudFormation 构建 VPC（第一部分）</a></p></li></ul><h1 id="cdk">CDK</h1><p>AWS <strong>Cloud Development Kit</strong></p><p>The AWS Cloud Development Kit (CDK) provides some of the same benefits of CloudFormation but with a few key differences.</p><p>The CDK is an infrastructure-as-code solution that you can use with several popular programming languages. In other words, it’s like CloudFormation, but using a language you already know. The CDK also contains command line tools to create infrastructure-as-code templates and to instantiate, update, and tear down stacks.</p><p>CDK和Cloud Formation很像，但一个区别是它可以用自己知道的一个语言，比如typescript来写这样。</p><p>CDK 把 CloudFormation 抽象了一层。它使用 TypeScript 等程序语言，把 CloudFormation 的模板包装成了一个领域专用语言（domain-specific language），CDK 的编译器会把这个语言再转译成 CloudFormation 模板。</p><p>CDK更好用。但底层实际也是CloudFormation。</p><p>CDK 教程： <a href="https://aws.amazon.com/cn/getting-started/guides/setup-cdk/module-three/?trk=31aeab24-3bd8-472c-a670-df09849e33f8&amp;sc_channel=el">官网</a></p><p><strong>cdk deploy</strong> 命令会将您的 TypeScript 编译为 JavaScript，同时创建一个 CloudFormation 更改集来部署此更改。</p><h2 id="cdk教程">CDK教程</h2><h3 id="cdk命令">cdk命令</h3><div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">cdk</span> <span class="n">diff</span>        <span class="n">compare</span> <span class="n">deployed</span> <span class="n">stack</span> <span class="k">with</span> <span class="n">current</span> <span class="n">state</span> <span class="n">将指定的堆栈及其依赖关系与已部署的堆栈或本地</span> <span class="nc">CloudFormation</span> <span class="n">模板进行比较</span>

<span class="n">cdk</span> <span class="n">deploy</span> <span class="n">命令会将您的</span> <span class="nc">TypeScript</span> <span class="n">编译为</span> <span class="nc">JavaScript</span><span class="err">，</span><span class="n">同时创建一个</span> <span class="nc">CloudFormation</span> <span class="n">更改集来部署此更改</span><span class="err">。</span>  <span class="n">deploy</span> <span class="k">this</span> <span class="n">stack</span> <span class="n">to</span> <span class="n">your</span> <span class="n">default</span> <span class="nc">AWS</span> <span class="n">account</span><span class="o">/</span><span class="n">region</span>

<span class="n">cdk</span> <span class="n">synth</span>       <span class="n">emits</span> <span class="n">the</span> <span class="n">synthesized</span> <span class="nc">CloudFormation</span> <span class="n">template</span> <span class="n">输出cloudFormation的diff</span><span class="o">.</span>
<span class="n">cdk</span> <span class="n">init</span> <span class="o">--</span><span class="n">language</span> <span class="n">typescript</span>
<span class="n">cdk</span> <span class="nf">list</span> <span class="o">(</span><span class="n">ls</span><span class="o">)</span> <span class="n">列出应用程序中的堆栈</span>
</code></pre></div></div><p>自定义ts主要在lib文件夹中。</p><p>cdk bootstrap: <a href="https://docs.aws.amazon.com/cdk/v2/guide/bootstrapping.html">link</a></p><ul><li><em>Bootstrapping</em> is the process of preparing an <a href="https://docs.aws.amazon.com/cdk/v2/guide/environments.html">environment</a> for deployment. Bootstrapping is a one-time action that you must perform for every environment that you deploy resources into.</li></ul><h2 id="基础设施">基础设施</h2><p>在深入探讨代码的编写之前，我们需要解释和安装 <strong><a href="https://docs.aws.amazon.com/cdk/api/v2/docs/aws-construct-library.html">AWS CDK 构造库模块</a></strong>。 构造可以代表单个 AWS 资源，例如 Amazon Simple Storage Service（Amazon S3）存储桶，也可以是由多个 AWS 相关资源组成的更高级别的抽象。 AWS 构造库由几个模块组成。 对于本教程，我们需要 Amazon EC2 模块，该模块中还包括对 Amazon VPC 的支持。</p><p>要安装 Amazon EC2 模块，我们将使用 <strong>npm</strong>。 在项目目录中运行以下命令：</p><div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm <span class="nb">install</span> @aws-cdk/aws-ec2
</code></pre></div></div><p>该命令安装所有必需的模块。如果查看您的 <strong>package.json</strong> 文件，就会看到该文件也添加到此处。</p><p>事例code</p><div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="err">* </span><span class="nn">as</span> <span class="n">cdk</span> <span class="n">from</span> <span class="ss">'aws</span><span class="o">-</span><span class="n">cdk</span><span class="o">-</span><span class="n">lib</span><span class="o">';</span>
<span class="k">import</span> <span class="err">{ </span><span class="nn">Construct</span> <span class="o">}</span> <span class="n">from</span> <span class="ss">'construct</span><span class="n">s</span><span class="o">';</span>
<span class="k">import</span> <span class="err">* </span><span class="nn">as</span> <span class="n">ec2</span> <span class="n">from</span> <span class="ss">'aws</span><span class="o">-</span><span class="n">cdk</span><span class="o">-</span><span class="n">lib</span><span class="o">/</span><span class="n">aws</span><span class="o">-</span><span class="n">ec2</span><span class="o">';</span>
<span class="c1">// import * as sqs from 'aws-cdk-lib/aws-sqs';</span>

<span class="n">export</span> <span class="k">class</span> <span class="nc">CdkDemoStack</span> <span class="k">extends</span> <span class="nv">cdk</span><span class="o">.</span><span class="py">Stack</span> <span class="o">{</span>
  <span class="nf">constructor</span><span class="o">(</span><span class="n">scope</span><span class="k">:</span> <span class="kt">Construct</span><span class="o">,</span> <span class="n">id</span><span class="k">:</span> <span class="kt">string</span><span class="o">,</span> <span class="n">props</span><span class="o">?:</span> <span class="nv">cdk</span><span class="o">.</span><span class="py">StackProps</span><span class="o">)</span> <span class="o">{</span>
    <span class="nf">super</span><span class="o">(</span><span class="n">scope</span><span class="o">,</span> <span class="n">id</span><span class="o">,</span> <span class="n">props</span><span class="o">);</span>

    <span class="c1">// The code that defines your stack goes here</span>
    <span class="c1">// We have created the VPC object from the VPC class</span>
    <span class="k">new</span> <span class="nv">ec2</span><span class="o">.</span><span class="py">Vpc</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="ss">'mainVP</span><span class="n">C</span><span class="o">',</span> <span class="o">{</span>
      <span class="c1">// This is where you can define how many AZs you want to use</span>
      <span class="n">maxAzs</span><span class="k">:</span> <span class="err">2</span><span class="o">,</span>
      <span class="c1">// This is where you can define the subnet configuration per AZ</span>
      <span class="n">subnetConfiguration</span><span class="k">:</span> <span class="err">[</span>
         <span class="o">{</span>
           <span class="kt">cidrMask:</span> <span class="err">24</span><span class="o">,</span>
           <span class="kt">name:</span> <span class="kt">'public-subnet'</span><span class="o">,</span>
           <span class="n">subnetType</span><span class="k">:</span> <span class="kt">ec2.SubnetType.PUBLIC</span><span class="o">,</span>
         <span class="o">}</span>
      <span class="err">]</span>
   <span class="o">});</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div><p>app.ts 是所有代码的入口点。通常任何额外的代码都可以通过在扩展 DeploymentStack 类的其他文件中创建类来组织为堆栈</p><h2 id="cdk-toolkit-for-vscode">Cdk toolkit for vscode</h2><p><a href="https://docs.aws.amazon.com/toolkit-for-vscode/latest/userguide/setup-toolkit.html#setup-prereq">link</a></p><h1 id="使用former2进行资源配置导出">使用former2进行资源配置导出</h1><p>这是一个AWS 账号里现成资源导出成CDK/cloudformation的开源工具。</p><p>https://github.com/iann0036/former2</p><p>需要再mac本地上运行，而不用他们提供的外部开放网站，这样更安全。</p><p>如何本地运行？</p><ol><li><p>mac上启动docker.</p></li><li><div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">git</span> <span class="n">clone</span> <span class="n">git</span><span class="nd">@github</span><span class="o">.</span><span class="py">com</span><span class="k">:</span><span class="kt">iann0036/former2.git</span>
<span class="n">cd</span> <span class="n">former2</span>
<span class="n">docker</span> <span class="n">build</span> <span class="o">-</span><span class="n">t</span> <span class="n">former2_local</span><span class="k">:</span><span class="err">1</span><span class="kt">.</span><span class="err">0</span> <span class="kt">.</span>
<span class="kt">docker</span> <span class="kt">run</span> <span class="kt">--name</span> <span class="kt">former2</span> <span class="kt">-p</span> <span class="kt">$host_port:</span><span class="err">80</span> <span class="kt">-d</span> <span class="kt">former2_local:</span><span class="err">1</span><span class="kt">.</span><span class="err">0</span>
</code></pre></div></div></li><li><p>docker软件里open broswer. 会进入127.0.0.1:xxx的一个网址。</p></li><li><p>然后aws账号里创建一个iam user,授予读的权限。iam user里的安全凭证下面点击访问密钥，创建一个ak, sk。Access keys are long-term credentials for an IAM user or the AWS account root user. You can use access keys to sign programmatic requests to the AWS CLI or AWS API (directly or using the AWS SDK). For more information, see <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_aws-signing.html">Signing AWS API requests</a>. Access keys consist of two parts: an access key ID (for example, <code class="language-plaintext highlighter-rouge">AKIAIOSFODNN7EXAMPLE</code>) and a secret access key (for example, <code class="language-plaintext highlighter-rouge">wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY</code>). You must use both the access key ID and secret access key together to authenticate your requests.</p></li><li>然后填入进行scan。scan后就可以看资源，选中，然后点击左上角的generate 就可以看到生成的代码了。</li></ol></article><div class="share mobile-hidden"><div class="share-component"></div></div><div class="comment mobile-hidden"></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width: 96%" type="text" id="search_box" placeholder="Search" /></div><ul id="search_results" style=" font-size: 14px; list-style-type: none; padding-top: 10px; padding-left: 10px; " ></ul><script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/search_data.json', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 20, fuzzy: false, exclude: ['Welcome'] }); window.onload = function(){ var query_text = window.location.search.substring(1); var vars = query_text.split("&"); for (var i=0;i<vars.length;i++) { var pair = vars[i].split("="); if(pair[0] == "search_text"){ var query = pair[1]; query = decodeURI(query); var search = document.getElementById('search_box'); search.value = query; var event = new InputEvent('keyup'); search.dispatchEvent(event); break } } } </script><h3 class="post-directory-title">Table of Contents</h3><div id="post-directory-module"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/jquery.toc.js"></script><div class="mobile-hidden"><h3>Popular Posts</h3><ul><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2022/12/01/typescript%E7%AC%94%E8%AE%B0/">2022-12 typescript笔记</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2022/08/16/scala%E8%AF%AD%E6%B3%95/">2022-08 scala语法</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/12/26/etcd%E5%92%8Craft/">2021-12 etcd和raft</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/09/08/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9/">2021-09 状态压缩</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/01/25/%E5%8D%9A%E5%BC%88%E8%AE%BA/">2021-01 博弈论</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/01/09/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE/">2021-01 分布式算法和协议</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/12/08/Kafka%E5%8E%9F%E7%90%861-%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/">2020-12 kafka原理1-基础架构</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/12/08/ElasticSearch/">2020-12 ElasticSearch(ES)原理</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/11/29/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93/">2020-11 动态规划总结</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/11/12/%E7%BA%BF%E6%AE%B5%E6%A0%91/">2020-11 线段树</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2017/12/03/javascript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">2017-12 javascript笔记</a></h6></ul></div></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="Fulong Ma">Fulong Ma</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="https://www.privacypolicygenerator.info/live.php?token=cnfKULv1VpqenfUs021YVA90fPiK75Cw">Privacy Policy</a></li><li> <a href="https://www.termsfeed.com/live/9dccd944-1b18-436d-bd12-3dd799b1282a">Terms </a></li><li> <a href="javascript:window.scrollTo(0,0)">TOP</a></li></ul><a href="https://github.com/mafulong/mafulong.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://mafulong.github.io/" title="Home" target="">Home</a></li><li> <a href="https://mafulong.github.io/categories/" title="Categories" target="">Categories</a></li><li> <a href="https://mafulong.github.io/archives/" title="Achieves" target="">Achieves</a></li><li> <a href="https://mafulong.github.io/open-source" title="Open-Source" target="">Open-Source</a></li><li> <a href="https://mafulong.github.io/bookmark" title="Bookmark" target="">Bookmark</a></li><li> <a href="https://mafulong.github.io/about" title="About" target="">About</a></li></ul><script async src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span></div></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script> <script> $(document).ready(function() { $("td img").each(function() { var strA = "<a href='" + this.src + "' itemscope=\"\" itemtype=\"http://schema.org/ImageObject\" itemprop=\"url\" data-fancybox=\"default\" rel=\"default\"></a>"; $(this).wrapAll(strA); }); $("p img").each(function() { var strA = "<a href='" + this.src + "' itemscope=\"\" itemtype=\"http://schema.org/ImageObject\" itemprop=\"url\" data-fancybox=\"default\" rel=\"default\"></a>"; $(this).wrapAll(strA); }); }); </script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function ($) { $('.geopattern').each(function () { $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script><div style="display:none"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-SS4VDLWLNC"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() {dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SS4VDLWLNC'); </script></div></body></html>

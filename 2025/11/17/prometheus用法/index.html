<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="google-site-verification" content="wVZecs0Awis41AZhX45RBAUlyk3nnpoOkebdIemwhxQ" /><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>prometheus用法 &mdash; Fulongのblog</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/github.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="https://mafulong.github.io/2025/11/17/prometheus%E7%94%A8%E6%B3%95/"><link rel="alternate" type="application/atom+xml" title="Fulongのblog" href="https://mafulong.github.io"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/favicon.ico"><meta property="og:title" content="prometheus用法"><meta name="keywords" content="logbook, mafulong"><meta name="og:keywords" content="logbook, mafulong"><meta name="description" content="prometheus用法"><meta name="og:description" content="prometheus用法"><meta property="og:url" content="https://mafulong.github.io/2025/11/17/prometheus%E7%94%A8%E6%B3%95/"><meta property="og:site_name" content="Fulongのblog"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2025-11-17"> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://mafulong.github.io/" title="Fulongのblog"><span class="octicon octicon-mark-github"></span> Fulongのblog</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://mafulong.github.io/" class=" site-header-nav-item" target="" title="Home">Home</a> <a href="https://mafulong.github.io/categories/" class=" site-header-nav-item" target="" title="Categories">Categories</a> <a href="https://mafulong.github.io/archives/" class=" site-header-nav-item" target="" title="Achieves">Achieves</a> <a href="https://mafulong.github.io/open-source" class=" site-header-nav-item" target="" title="Open-Source">Open-Source</a> <a href="https://mafulong.github.io/bookmark" class=" site-header-nav-item" target="" title="Bookmark">Bookmark</a> <a href="https://mafulong.github.io/about" class=" site-header-nav-item" target="" title="About">About</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="prometheus用法"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">prometheus用法</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2025/11/17 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://mafulong.github.io/categories/#Tools" title="Tools">Tools</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 5980 字，约 18 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h2 id="prometheus用法">prometheus用法</h2><h1 id="数据上报">数据上报</h1><p>Prometheus 和一般的 APM 工具不一样，它采用的是由 server 端主动 pull 的交互模型，就是你准备好本地数据，然后在 Prometheus server 上配置好数据所在的地址，接下来就是等 Prometheus 来主动、定期拉取数据。</p><p>Prometheus 有好几种数据类型，但是通常我们只需要关注 counter、gauge、histogram、summary 这 4 种</p><p>Prometheus 的核心是一个时序数据库，它按照<strong>时间序列</strong>来存储数据</p><h2 id="counter">counter</h2><p>我们的每条数据包含了：</p><ul><li>指标名称 metric name：http_request_total</li><li>标签 labels：uri, method, application, instance_ip <strong>以及它们的值</strong></li><li>样本值：比如上面这个是 counter 类型的指标，它的值是不断累加上去的，那这个样本值就代表当前实例从启动开始累积到现在的某接口的请求次数</li><li>隐式包含了时间戳 timestamp，因为数据是一直在变化的，当前数据仅代表当前时间的值</li></ul><p>单单看这个一直增长的图通常没什么意义，能用的场景太少了，所以我们要先来了解下面的几个函数</p><ul><li>rate: 计算每秒平均增长率</li><li>increase: 计算总增长量</li><li>irate: 计算瞬时增长率</li></ul><h3 id="rate-函数">rate 函数</h3><p>rate 函数的含义是每秒的平均增长率，其实就类似 QPS 的意思。<strong>速率=数量/时间</strong>，所以我们在做图的时候，还需要考虑分母的时间取多长比较合适，比如下面我先使用 1 分钟作为一个统计区间，也就是说 <strong>图上每个时间点的数值 = 这个时间点往前1分钟的数据增长量 / 60秒</strong>。</p><p>我们通常需要对结果进行聚合，这里需要用到 <strong>sum</strong> 函数，它非常简单，就是把搜索到的满足条件的时间序列求和。</p><p>比如我们可以按照 application 的维度，或者按照 application+ip+接口 的维度，如下：</p><p><code class="language-plaintext highlighter-rouge">sum( rate(http_request_total[1m]) ) by(application)</code>，这样我们可以看到每个应用的总体 QPS 了，而不是某个接口的 QPS</p><p><code class="language-plaintext highlighter-rouge">sum( rate(http_request_total[1m]) ) by(application, uri)</code>，这样我们可以看到每个接口的 QPS</p><p>sum by 有两种写法，把 by 写在前面也是可以的，比如 <code class="language-plaintext highlighter-rouge">sum by(application, uri) (rate(http_request_total[1m]))</code></p><p>sum 函数还有一个特点，就是它的结果是分组数据，在一些场景中很适合用来做对比，也就是饼状图</p><p>总结一下 rate 函数，它很适合用来制作代表速率的图，比如订单的创建速率、网络的速率、接口的 QPS 等等，同时它适合搭配 sum 函数一起使用。</p><h3 id="irate-函数制图">irate 函数制图</h3><p>有了 rate 函数的概念以后，理解 irate 就会容易很多。</p><p>比如某个指标，每 10 秒被采集一次数据，有如下数据：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>2024-09-09 00:00:00 100
2024-09-09 00:00:10 150
2024-09-09 00:00:20 160
2024-09-09 00:00:30 400
2024-09-09 00:00:40 450
2024-09-09 00:00:50 600
2024-09-09 00:01:00 1000
</code></pre></div></div><p>先观察一下上面这组数据，每 10 秒增加的数量非常不均匀，有些时候只增加了 10 个，但是最后 10 秒一下子增加了 400 个。</p><p>如果我们使用 rate 函数，每分钟作为一个统计区间，计算在 00:01:00 这个时间点的速率，得到的结果是 (1000-100)/60=15。</p><p>但是如果我们使用 <strong>irate</strong> 函数，它只会考虑<strong>最后两个数据点的增长率</strong>，也就是说，在 00:01:00 这个时间点的<strong>瞬时</strong>增长率，为 (1000-600)/10=40。</p><p>从这个例子，我们可以看到，虽然 rate 和 irate 都是描述增长率，但是 irate 对数据的增长速率非常敏感，而 rate 表现得比较平滑。</p><p>既然 irate 只取最后的两个数据，所以我们其实也可以猜到，下面的两个表达式，虽然时间范围看上去差异很大，一个 1m 一个 10m，但是基本上可以肯定，做出来的图是一样的，之所以要指定时间，是因为怕采样频率的问题，以及数据可能有丢失等。</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>irate(http_request_total{application="order-service", ip="10.100.0.3", uri="/api/v1/order/query-detail"}[1m])

irate(http_request_total{application="order-service", ip="10.100.0.3", uri="/api/v1/order/query-detail"}[10m])
</code></pre></div></div><h3 id="increase-函数制图">increase 函数制图</h3><p>increase 非常容易理解，它代表在一段时间内，第一个数据到最后一个数据，它们之间的差值。</p><p>比如我设置一个这种图：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>increase(http_request_total{application="order-service", ip="10.100.0.3", uri="/api/v1/order/query-detail"}[5m])
</code></pre></div></div><p>图上出现的每个点，它代表这个时间点往前5分钟，这个时间序列总共增长了多少数值。</p><p>其实大家应该很容易发现，increase 和 rate 函数用了一样的数据，都是一个时间区间的<strong>第一条</strong>和<strong>最后一条</strong>数据。</p><p>所以从数学上，很容易推出：<code class="language-plaintext highlighter-rouge">increase(v[t]) = rate(v[t]) * t</code>。因此，理论上我们是可以只使用它们之中的一个函数的。</p><p>很多时候，我们想知道一段时间的总体变化，而不是变化速率，这个时候我们一般会使用 increase 函数。比如我想知道过去 24 小时内的新用户注册数、24 小时订单数等，这种图可以不局限于做折线图或者是柱状图，也可以做饼图。</p><p>counter 类型大概就说这么多，最后需要指出的是，前面我们说过了 counter 的数据是一直增长的，但是如果我们的应用重启了，也就是说，本地的数据发生了重置，Prometheus 会记录新的从 0 开始的样本值，但是对 rate, irate, increase 这些函数，会特殊处理，看下面这两个图就清楚了。</p><h2 id="gauge-类型">Gauge 类型</h2><p>Gauge 类型非常简单，它就是代表某个指标在某个时间点的数值，基本上每个点的数值都是独立的，前后之前没什么关联。</p><p>它的使用场景也非常多，比如当前的 CPU 使用率、内存使用率、kafka 的 consumer lag、当前线程数等等。</p><p>首先是，它非常适合用来做一些仪表盘的图</p><p>当然，把它们做成折线图也很有用，可以看到数据的变化趋势，比如下面这个 cpu 使用率的趋势图</p><p>另一个很好用的图，是 stat panel，也就是把上面两个结合在一起，既可以看到趋势，也可以看到当前最新值。</p><p>这里要强调一下，如果你觉得有需要，你依然可以使用前面介绍的 rate、irate、increase 等这些函数在 gauge 类型上，虽然很奇怪。对这些函数而言，gauge 和 counter 都是一样的时序数据，只不过 counter 类型的数据有可能要处理数据重置的情况，而 gauge 不存在。</p><p>在。</p><h2 id="summary-类型">Summary 类型</h2><p>接下来我们要进入到 Summary 类型的介绍，它比 counter 和 gauge 稍微复杂一些，我们要介绍一些内部细节，才能帮助大家理解它，进而更容易理解后面要介绍的 Histogram 类型。</p><p>首先，我们需要在 application.properties 文件中配置下面这 3 个属性（当然你也可以通过 @Configuration 来配置），这里指明我们要统计 <strong>http.request</strong> 的 P90 和 P99，另外指定了使用 3 个时间窗口，每个窗口是 1 分钟，后面会解释它们的作用。</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>management.metrics.distribution.percentiles.[http.request]=0.9, 0.99
management.metrics.distribution.buffer-length.[http.request]=3 聚合几个窗口
management.metrics.distribution.expiry.[http.request]=1m 每个窗口长度
</code></pre></div></div><p>每过一分钟：</p><ul><li><p>当前窗口满了 → 切到下一个；</p></li><li><p>被切换出去的旧窗口清空后等待重用；</p></li><li><p>总是保持 3 个窗口的滑动统计（约 3 分钟范围）。</p></li></ul><p>这样计算的 P90 就是最近 3 分钟所有样本的 90th percentile。</p><p>Micrometer 的 summary 在计算 P90 时，会：</p><blockquote><p>把当前配置的多个时间窗口（如 3×1 分钟）的所有样本合并，排序后取第 90% 位置的值作为 P90。</p></blockquote><p>窗口只是存储样本的分片，真正计算时是<strong>跨窗口合并后一起算分位数</strong>。</p><p>它的 API 也非常简单，下面我模拟这些接口，每秒钟被请求一次，每次耗时几十到几百毫秒</p><p>一个 summary 类型包含好几个时间序列，另外还有一个 gauge 类型的时间序列。</p><p>我们分别来看：</p><p>http_request_seconds{quantile=”0.9”}，这个记录的是当前的 P90 数据</p><p>http_request_seconds{quantile=”0.99”}，这个记录的是当前的 P99 数据</p><p>http_request_seconds_count：请求次数的总和，它和我们前面介绍 counter 类型的时候的 http_request_total 其实就是一个东西，记录累计访问次数。</p><p>http_request_seconds_sum：响应时间的总和，单位是秒，对接口的每次访问都会增加这个值，也是一个 counter 类型。</p><p>http_request_seconds_max：这个更好理解了，就是记录最大响应时间，它是 gauge 类型。</p><ul><li><p><strong>核心机制</strong><br /> Summary 类型的核心在于计算分位数（如 P90、P99）。每个 Summary 时间序列会维护若干个时间窗口（如 3 个，每个 1 分钟），用来暂存请求耗时等样本数据。</p><ul><li><p>第 1 分钟写入窗口 0；</p></li><li><p>第 2 分钟写入窗口 1，同时聚合窗口 0+1 计算分位数；</p></li><li><p>第 3 分钟写入窗口 2，同时聚合 0+1+2；</p></li><li><p>第 4 分钟循环回窗口 0，清空再用。<br /> Prometheus 每次抓取时，Micrometer 会将当前 3 个窗口的样本合并计算分位数后返回。</p></li></ul></li><li><p><strong>计算方式</strong><br /> P90、P99 等分位数代表“90%/99% 请求耗时不超过的值”，是从当前窗口中统计出的结果。<br /> 例如：</p><p><code class="language-plaintext highlighter-rouge">http_request_seconds{quantile="0.9"} = 0.788s</code></p><p>表示该时间段 90% 的请求耗时 ≤ 0.788 秒。</p></li><li><p><strong>数据来源与限制</strong></p><ul><li><p>Summary 是<strong>客户端计算型指标</strong>，即由应用实例自身计算分位数后暴露给 Prometheus。</p></li><li><p>因此 <strong>无法跨实例聚合</strong>，也不能跨时间窗口聚合（例如 1h 的 P90 无法从多个 1m 的 P90 得出）。</p></li><li><p>这意味着如果多个实例的 P90 分别是 50ms 和 150ms，无法合并成一个整体 P90。</p></li></ul></li><li><p><strong>与 Histogram 的区别</strong></p><ul><li><p><strong>Summary</strong>：客户端计算分位数，占用资源少，但无法全局聚合。</p></li><li><p><strong>Histogram</strong>：将样本按区间（bucket）划分，由 Prometheus 统一计算分位数，支持跨实例、跨时间聚合，但开销更高。</p></li></ul></li><li><p><strong>适用场景</strong></p><ul><li><p>单实例性能监控、快速查看延迟分布；</p></li><li><p>不适合全局统计或多实例聚合分析。</p></li></ul></li></ul><p>Histogram 的原理可以总结得很清楚，核心思想就是 <strong>通过固定桶（bucket）统计样本数量，由服务端聚合计算分位数和其他指标</strong>。</p><h1 id="grafana用法">Grafana用法</h1><p>根据数据类型选择图表：</p><ul><li>折线图（Time series）</li><li>统计卡片（Stat）</li><li>饼图（Pie）</li><li>表格（Table）</li><li>仪表盘（Gauge）</li></ul><h2 id="常见-promql-使用技巧">常见 PromQL 使用技巧</h2><h3 id="1-忽略标签去掉维度差异">1. 忽略标签（去掉维度差异）</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum without(instance) (rate(http_request_total[1m]))
</code></pre></div></div><h3 id="2-指定标签">2. 指定标签</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http_request_total{application="order-service", uri="/api/query"}
</code></pre></div></div><h3 id="3-分组聚合">3. 分组聚合</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(rate(http_request_total[1m])) by (uri)
</code></pre></div></div><h3 id="4-排序">4. 排序</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>topk(5, sum(rate(http_request_total[1m])) by (uri))
</code></pre></div></div><hr /><h2 id="prometheus--grafana-常用面板画法简要笔记">Prometheus + Grafana 常用面板画法（简要笔记）</h2><h3 id="1-qpscounter--rate">1. <strong>QPS（Counter → rate）</strong></h3><h4 id="整体-qps">整体 QPS</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(rate(http_request_total[1m]))
</code></pre></div></div><h4 id="按接口">按接口</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(rate(http_request_total[1m])) by (uri)
</code></pre></div></div><h4 id="按应用">按应用</h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(rate(http_request_total[1m])) by (application)
</code></pre></div></div><h4 id="面板类型">面板类型</h4><ul><li>折线（Time series）</li><li>Legend：按 uri 或 application 展示</li><li>适合监控「流量趋势」</li></ul><hr /><h3 id="2-瞬时-qpsirate">2. <strong>瞬时 QPS（irate）</strong></h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(irate(http_request_total[1m])) by (uri)
</code></pre></div></div><p>更敏感，用来抓突发。</p><p>面板类型：折线图 注意：抖动比 rate 大。</p><hr /><h4 id="3-周期总请求量increase">3. <strong>周期总请求量（increase）</strong></h4><h3 id="过去-24-小时的请求数">过去 24 小时的请求数</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(increase(http_request_total[24h])) by (uri)
</code></pre></div></div><p>适用于：</p><ul><li>饼图：接口占比</li><li>柱状：不同接口的访问量对比</li><li>Stat：展示总访问量</li></ul><hr /><h4 id="4-响应时间summary">4. <strong>响应时间（Summary）</strong></h4><h3 id="p90">P90</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http_server_requests_seconds{quantile="0.9"}
</code></pre></div></div><h3 id="p99">P99</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http_server_requests_seconds{quantile="0.99"}
</code></pre></div></div><p>面板类型：折线 注意：Summary 的 quantile 不可跨实例聚合。</p><hr /><h4 id="5-响应时间histogram">5. <strong>响应时间（Histogram）</strong></h4><h3 id="p99可聚合">P99（可聚合）</h3><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>histogram_quantile(0.99,
  sum(rate(http_request_duration_seconds_bucket[1m])) by (le)
)
</code></pre></div></div><p>可用于：</p><ul><li>跨实例服务延迟监控</li><li>高并发系统延迟趋势图</li></ul><hr /><h4 id="6-平均响应时间">6. <strong>平均响应时间</strong></h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sum(rate(http_request_duration_seconds_sum[1m]))
/
sum(rate(http_request_duration_seconds_count[1m]))
</code></pre></div></div><p>用于平均耗时趋势图（比 P99 平稳）。</p><hr /><h4 id="7-cpu--memorygauge">7. <strong>CPU / Memory（Gauge）</strong></h4><p>CPU：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>instance_cpu_usage_percent
</code></pre></div></div><p>内存：</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>instance_memory_usage_bytes
</code></pre></div></div><p>面板类型：</p><ul><li>折线</li><li>Stat（显示当前最新值）</li><li>Gauge（仪表盘实时值）</li></ul><hr /><h4 id="8-kafka-consumer-lag">8. <strong>Kafka Consumer Lag</strong></h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kafka_consumergroup_lag
</code></pre></div></div><p>面板类型：</p><ul><li>折线（看趋势）</li><li>Stat（看当前 lag）</li><li>阈值线（如 &gt;1000 报警）</li></ul><hr /><h4 id="9-链同步高度gauge">9. <strong>链同步高度（Gauge）</strong></h4><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>blockchain_block_height
</code></pre></div></div><p>常用图法：</p><ul><li>折线 → 各节点高度</li><li>Stat → 当前高度</li><li>Bar → 节点之间差异</li></ul></article><div class="share mobile-hidden"><div class="share-component"></div></div><div class="comment mobile-hidden"></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width: 96%" type="text" id="search_box" placeholder="Search" /></div><ul id="search_results" style=" font-size: 14px; list-style-type: none; padding-top: 10px; padding-left: 10px; " ></ul><script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/search_data.json', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 20, fuzzy: false, exclude: ['Welcome'] }); window.onload = function(){ var query_text = window.location.search.substring(1); var vars = query_text.split("&"); for (var i=0;i<vars.length;i++) { var pair = vars[i].split("="); if(pair[0] == "search_text"){ var query = pair[1]; query = decodeURI(query); var search = document.getElementById('search_box'); search.value = query; var event = new InputEvent('keyup'); search.dispatchEvent(event); break } } } </script><h3 class="post-directory-title">Table of Contents</h3><div id="post-directory-module"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/jquery.toc.js"></script><div class="mobile-hidden"><h3>Popular Posts</h3><ul><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2022/12/01/typescript%E7%AC%94%E8%AE%B0/">2022-12 typescript笔记</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2022/08/16/scala%E8%AF%AD%E6%B3%95/">2022-08 scala语法</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/12/26/etcd%E5%92%8Craft/">2021-12 etcd和raft</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/09/08/%E7%8A%B6%E6%80%81%E5%8E%8B%E7%BC%A9/">2021-09 状态压缩</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/01/25/%E5%8D%9A%E5%BC%88%E8%AE%BA/">2021-01 博弈论</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2021/01/09/%E5%88%86%E5%B8%83%E5%BC%8F%E7%AE%97%E6%B3%95%E5%92%8C%E5%8D%8F%E8%AE%AE/">2021-01 分布式算法和协议</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/12/08/Kafka%E5%8E%9F%E7%90%861-%E5%9F%BA%E7%A1%80%E6%9E%B6%E6%9E%84/">2020-12 kafka原理1-基础架构</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/12/08/ElasticSearch/">2020-12 ElasticSearch(ES)原理</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/11/29/%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%80%BB%E7%BB%93/">2020-11 动态规划总结</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2020/11/12/%E7%BA%BF%E6%AE%B5%E6%A0%91/">2020-11 线段树</a></h6><h6 class="repo-list-name font16px"> <a href="https://mafulong.github.io/2017/12/03/javascript%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">2017-12 javascript笔记</a></h6></ul></div></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2015 <span title="Fulong Ma">Fulong Ma</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="https://www.privacypolicygenerator.info/live.php?token=cnfKULv1VpqenfUs021YVA90fPiK75Cw">Privacy Policy</a></li><li> <a href="https://www.termsfeed.com/live/9dccd944-1b18-436d-bd12-3dd799b1282a">Terms </a></li><li> <a href="javascript:window.scrollTo(0,0)">TOP</a></li></ul><a href="https://github.com/mafulong/mafulong.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://mafulong.github.io/" title="Home" target="">Home</a></li><li> <a href="https://mafulong.github.io/categories/" title="Categories" target="">Categories</a></li><li> <a href="https://mafulong.github.io/archives/" title="Achieves" target="">Achieves</a></li><li> <a href="https://mafulong.github.io/open-source" title="Open-Source" target="">Open-Source</a></li><li> <a href="https://mafulong.github.io/bookmark" title="Bookmark" target="">Bookmark</a></li><li> <a href="https://mafulong.github.io/about" title="About" target="">About</a></li></ul><script async src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/busuanzi/2.3/busuanzi.pure.mini.js"></script><div class="mobile-hidden" style="margin-top:8px"> <span id="busuanzi_container_site_pv" style="display:none"> 本站访问量<span id="busuanzi_value_site_pv"></span>次 </span> <span id="busuanzi_container_site_uv" style="display:none"> / 本站访客数<span id="busuanzi_value_site_uv"></span>人 </span></div></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@4.0/dist/fancybox.umd.js"></script> <script> $(document).ready(function() { $("td img").each(function() { var strA = "<a href='" + this.src + "' itemscope=\"\" itemtype=\"http://schema.org/ImageObject\" itemprop=\"url\" data-fancybox=\"default\" rel=\"default\"></a>"; $(this).wrapAll(strA); }); $("p img").each(function() { var strA = "<a href='" + this.src + "' itemscope=\"\" itemtype=\"http://schema.org/ImageObject\" itemprop=\"url\" data-fancybox=\"default\" rel=\"default\"></a>"; $(this).wrapAll(strA); }); }); </script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/mafulong/mafulong.github.io@built/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function ($) { $('.geopattern').each(function () { $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script><div style="display:none"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-SS4VDLWLNC"></script> <script> window.dataLayer = window.dataLayer || []; function gtag() {dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-SS4VDLWLNC'); </script></div></body></html>

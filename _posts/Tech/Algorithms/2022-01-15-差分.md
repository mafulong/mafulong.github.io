---
layout: post
category: Algorithms
title: 差分
tags: Algorithms
---

## 差分

前缀和是元素的累加，而差分则是相邻两元素的差；前缀和用来计算整块元素的和，而差分则用来实现整块元素的加或减（例如将a[m]到a[n]都+1）；

同样，差分也可以化区间计算为点计算，减小时间复杂度。

diff[n]的含义，便是原始数组中当前项减去前一项的**差**。
即： diff[n] = a[n] - a[n-1] ；

主要用于针对某个区间+x的操作复杂度降低，可以o(1)对某个区间增加复杂度，然后可以根据差分数组反推原数组，叫做回收。





## 应用

### 一维差分

[1109. 航班预订统计 ](https://leetcode-cn.com/problems/corporate-flight-bookings/) 有一份航班预订表 bookings ，表中第 i 条预订记录 bookings[i] = [firsti, lasti, seatsi] 意味着在从 firsti 到 lasti （包含 firsti 和 lasti ）的 每个航班 上预订了 seatsi 个座位。

请你返回一个长度为 n 的数组 answer，里面的元素是每个航班预定的座位总数。



实际上就是区间增加x，然后根据还原出每个点的值。一维差分

```python
class Solution:
    def corpFlightBookings(self, bookings: List[List[int]], n: int) -> List[int]:
        diff = [0] * (n+1)
        for a, b, c in bookings:
            diff[a - 1] += c
            diff[b] -= c
        ans = [0] * n
        ans[0] = diff[0]
        for i in range(1, n):
            ans[i] = ans[i - 1] + diff[i]
        return ans
```

### 二维差分
---
layout: post
category: Python
title: python的__new__和__init__的区别
tags: Python
---

## python的__new__和__init__的区别

概括：简言之，_new_作用于_init_之前。前者可以决定是否调用后者，或者说可以决定调用哪个类的_init_方法。

解释一：首先要知道在面向对象编程中，实例化基本遵循创建实例对象、初始化实例对象、最后返回实例对象这么一个过程。Python 中的 _new_ 方法负责创建一个实例对象，_init_ 方法负责将该实例对象进行初始化；​

解释二：有人说如果将类比喻为工厂，那么_init_方法则是该工厂的生产工人，_init_方法接受的初始化参数则是生产所需原料，_init_方法会按照方法中的语句负责将原料加工成实例以供工厂出货。而_new_则是生产部经理，_new_方法可以决定是否将原料提供给该生产部工人，同时它还决定着出货产品是否为该生产部的产品，因为这名经理可以借该工厂的名义向客户出售完全不是该工厂的产品。

### _new_() 方法的特性：

new() 方法是在类准备将自身实例化时调用;

new() 方法始终都是类的静态方法，即使没有被加上静态方法装饰器 ;

继承自object的新式类才有new；

new至少要有一个参数cls，代表要实例化的类，此参数在实例化时由Python解释器自动提供；

new必须要有返回值，返回实例化出来的实例，这点在自己实现new时要特别注意，可以return父类new出来的实例，或直接是object的new出来的实例。

### _init_()
​_init_有一个参数self，就是这个_new_返回的实例，_init_在_new_的基础上可以完成一些其它初始化的动作，_init_不需要返回值;

若new没有正确返回当前类cls的实例，那当前类的init是不会被调用的，即使是父类的实例也不行。

```
__new__(cls[, ...])
__init__(self[, ...])
```

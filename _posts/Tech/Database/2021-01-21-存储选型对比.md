---
layout: post
category: Database
title: 存储选型对比
tags: Database
---

## 并发估算

一般应用来说，并发估算公式如下：

qps = 5 * 日pv / 86400

5是通用峰值倍数，如果你有高峰值特性自行调整，比如秒杀功能。

pv是访问次数，比如你每天数据库访问次数是100万，可估算峰值qps为60左右，比如数据库qps可达3000，那么可估算你的服务器还能撑同等场景50倍增长。



本质上就是访问次数除以时间，这就是qps每条访问次数的定义了。



1、抢购和活动场景

按照80%的访问量集中在20%的时间内

```
qps=pv*80%/86400*20%
```

2、白天提供业务的场景（例如政务查询系统等）

按照一半时间去计算4w秒

qps=pv/40000

3、全天后无明显波峰场景

qps=pv/86400



## 存储选型对比

以下可用性都在99.95%左右

redis 2ms  百万qps

elastic search 简单查询20-30ms, 复杂几t的可能秒级

rocksDB 10ms

mysql 20ms 千万以上基本就要分库分表了。读支持50w qps, 写大概在几千

mongo 20ms





## MQ

rocketmq 几十万tps  

kafka 百万 tps
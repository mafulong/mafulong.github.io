---
layout: post
category: SystemDesign
title: 系统设计
tags: SystemDesign
---

## 系统设计

[参考](https://soulmachine.gitbooks.io/system-design/content/cn/)

[https://www.bookstack.cn/read/system-design/cn-task-scheduler.md](https://www.bookstack.cn/read/system-design/cn-task-scheduler.md)



几本书：

[https://wizardforcel.gitbooks.io/gainlo-interview-guide/content/sd6.html](https://wizardforcel.gitbooks.io/gainlo-interview-guide/content/sd6.html)

[https://github.com/donnemartin/system-design-primer](https://github.com/donnemartin/system-design-primer)

[对应上面的翻译](https://wizardforcel.gitbooks.io/system-design-primer/content/)

必看： Grokking system design

[https://github.com/lei-hsia/grokking-system-design](https://github.com/lei-hsia/grokking-system-design)

设计数据密集型应用-Data-Intensive Application

[https://github.com/donnemartin/interactive-coding-challenges](https://github.com/donnemartin/interactive-coding-challenges)

[两周系统设计面试速成大纲](https://acecodeinterview.com/2_week_prep/)

答题流程

1. 先问核心需求，增加假设
2. 关注 性能、伸缩性(扩容）、扩展性、可用性(主备等)、安全性
3. 几个模块，每个模块提供什么样的能力
4. 各个模块的存储设计
5. 整体架构

## [系统设计参考1](https://soulmachine.gitbooks.io/system-design/content/cn/tinyurl.html)

### 分布式ID生成器

核心需求

- 全局唯一(unique)
- 按照时间粗略有序(sortable by time)
- 尽可能短

雪花算法: 

- 4个字节表示的Unix timestamp,
- 3个字节表示的机器的ID
- 2个字节表示的进程ID
- 3个字节表示的计数器

时间在前面可保证有序



使用mysql自增id, 比如8台机器，每个机器每次+8

### 短网址系统

需求

- 足够短

网上链接大概45亿，长度7的字符串足够了，每个元素是大小写字母+数字

用分布式id生成器生成短链，用Nosql kv来存， 短网址-> 长网址

使用302临时重定向

### 信息流

[专门blog](https://mafulong.github.io/2020/12/28/Feed%E6%B5%81/)

### 定时任务调度器

[参考个人blog](https://mafulong.github.io/2021/04/06/%E5%AE%9A%E6%97%B6%E5%99%A8/)


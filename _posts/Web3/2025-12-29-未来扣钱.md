---
layout: post
category: Web3
title: æœªæ¥æ‰£é’±
tags: Web3
---

## æœªæ¥æ‰£é’±å®žçŽ°æ–¹å¼



## ä¸€ã€æ ¸å¿ƒå‰æï¼ˆä¸€å®šè¦è®°ä½ï¼‰

- **ç­¾åä¸ä¼šè¿‡æœŸ**
- **äº¤æ˜“ä¼šå¤±æ•ˆï¼ˆnonce / gas / è§„åˆ™ï¼‰**
- **â€œæœªæ¥æ‰£é’±â€ä¸èƒ½é å­˜äº¤æ˜“ï¼Œåªèƒ½é æŽˆæƒæˆ–æ‰˜ç®¡**

------

## äºŒã€ä¸‰ç§æ ¸å¿ƒæ–¹æ¡ˆï¼ˆä»Žè½»åˆ°é‡ï¼‰

### 1ï¸âƒ£ Permitï¼ˆEIP-2612ï¼‰

**æ˜¯ä»€ä¹ˆ**

- ç”¨æˆ·åªç­¾åï¼Œä¸å…ˆå‘äº¤æ˜“
- ç”¨ç­¾åå®ŒæˆæŽˆæƒ

**æœ¬è´¨**

- â€œæˆ‘æŽˆæƒä½ åœ¨æœ‰æ•ˆæœŸå†…æ‰£æˆ‘è¿™äº› tokenâ€

**ç‰¹ç‚¹**

- ä¸å  nonce
- ç”¨æˆ·ä¸ä»˜ gas
- ä¸€æ­¥å®ŒæˆæŽˆæƒ + æ‰£æ¬¾
- å¿…é¡» token åŽŸç”Ÿæ”¯æŒ

**ä¸èƒ½ç”¨åœ¨**

- ä¸»å¸ï¼ˆETH / SOLï¼‰
- ä¸æ”¯æŒ permit çš„ tokenï¼ˆå¦‚ USDTï¼‰

------

### 2ï¸âƒ£ Allowanceï¼ˆapprove + transferFromï¼‰

**æ˜¯ä»€ä¹ˆ**

- ç»å…¸ ERC20 æŽˆæƒæ¨¡åž‹

**æœ¬è´¨**

- é“¾ä¸Šè®°è´¦çš„æ‰£æ¬¾æƒé™

**ç‰¹ç‚¹**

- 100% å…¼å®¹æ‰€æœ‰ ERC20
- æŽˆæƒçŠ¶æ€é“¾ä¸Šå¯æŸ¥
- ä¸¤æ­¥äº¤æ˜“
- æœ‰â€œæ— é™æŽˆæƒâ€é£Žé™©

**é€‚åˆ**

- è€ token
- åˆè§„ / å®¡è®¡è¦æ±‚é«˜
- ç”¨æˆ·èƒ½ç†è§£æŽˆæƒ

------

### 3ï¸âƒ£ TimeLock / Escrowï¼ˆæ‰˜ç®¡ï¼‰

**æ˜¯ä»€ä¹ˆ**

- é’±çŽ°åœ¨å°±è½¬è¿›åˆçº¦
- æ—¶é—´æˆ–æ¡ä»¶æ»¡è¶³åŽé‡Šæ”¾

**æœ¬è´¨**

- åˆçº¦æˆä¸ºèµ„äº§ owner

**ç‰¹ç‚¹**

- å®‰å…¨çº§åˆ«æœ€é«˜
- èµ„é‡‘æµåŠ¨æ€§æœ€ä½Ž
- ä½“éªŒæœ€é‡

**é€‚åˆ**

- å¤§é¢
- ä¸»å¸
- å¼ºç¡®å®šæ€§åœºæ™¯

------

## ä¸‰ã€Permit2ï¼ˆéžå¸¸é‡è¦ï¼‰

### Permit2 æ˜¯ä»€ä¹ˆ

- ä¸€ä¸ª**å…¬å…±ä»£æ‰£åˆçº¦**
- ä¸è¦æ±‚ token æ”¯æŒ permit
- ç”¨ç­¾åæŽ§åˆ¶ allowance çš„ä½¿ç”¨

### ä¸ºä»€ä¹ˆèƒ½ç”¨

- ERC20 æœ¬æ¥å°±æ”¯æŒ `transferFrom`
- Permit2 åªæ˜¯ï¼š
  - æŒæœ‰ allowance
  - ç”¨ç­¾åç²¾ç»†åŒ–ç®¡ç†

### å®žé™…æ•ˆæžœ

- **USDT / è€ ERC20 ä¹Ÿèƒ½â€œåƒ permit ä¸€æ ·ç”¨â€**
- å¤šä¸€å±‚ä¿¡ä»»ï¼ˆPermit2 åˆçº¦ï¼‰

------

## å››ã€ERC20 vs ä¸»å¸ï¼ˆæ ¹æœ¬å·®å¼‚ï¼‰

### ERC20

- è½¬è´¦è§„åˆ™åœ¨**åˆçº¦é‡Œ**
- æ”¯æŒï¼š
  - æŽˆæƒ
  - å»¶è¿Ÿæ‰§è¡Œ
  - ä»£æ‰£

### ä¸»å¸ï¼ˆETH / SOLï¼‰

- è½¬è´¦è§„åˆ™åœ¨**åè®®å±‚**
- åªèƒ½ï¼š
  - ç§é’¥å½“å‰ç­¾å
- **ä¸èƒ½æŽˆæƒç¬¬ä¸‰æ–¹æœªæ¥æ‰£æ¬¾**

ðŸ‘‰ æ‰€ä»¥ä¸»å¸åªèƒ½ç”¨ **Escrow / TimeLock**

------

## äº”ã€USDT / USDC å¿«é€Ÿç»“è®º

| Token    | åŽŸç”Ÿ Permit | Permit2 | æŽ¨èæ–¹æ¡ˆ           |
| -------- | ----------- | ------- | ------------------ |
| USDC     | âœ”           | âœ”       | åŽŸç”Ÿ Permit        |
| USDT     | âŒ           | âœ”       | Permit2 æˆ– approve |
| BSC USDT | âŒ           | âœ”       | Permit2            |
| ä¸»å¸     | âŒ           | âŒ       | Escrow             |

------

## å…­ã€ä»€ä¹ˆæ—¶å€™**ä¸èƒ½ç”¨ Permit**

- ä¸»å¸
- Token ä¸æ”¯æŒ
- æžå¤§é¢
- é•¿æœŸä¸ç¡®å®šæ‰£æ¬¾
- å¼ºåˆè§„ / å¯è§†åŒ–æŽˆæƒè¦æ±‚
- ä¸å¯ä¿¡å‰ç«¯

------

## ä¸ƒã€å®‰å…¨ç­‰çº§æŽ’åºï¼ˆä»Žä½Žåˆ°é«˜ï¼‰

```
Permit
â†’ Allowance
â†’ Permit2ï¼ˆåˆç†é…ç½®ï¼‰
â†’ TimeLock / Escrow
```

------

## å…«ã€ä¸€å¥è¯æ€»æ€»ç»“

> **ä½“éªŒ = ç­¾åï¼ˆPermit / Permit2ï¼‰**
>  **é€šç”¨ = Allowance**
>  **å®‰å…¨ = Escrow / TimeLock**
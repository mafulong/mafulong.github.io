---
layout: post
category: DailyLife
title: 路由器配置
tags: Life
---

## 路由器配置

## 路由器有线桥接

任何正常的路由器，都支持做主、旁路由(二级路由器)，主路由器又叫一级路由器，旁路由我们一般称为二级路由器、三级路由器……。

有两种方法：


**一、旁路由的Wan口接主路由器的Lan口**

![img](https://cdn.jsdelivr.net/gh/mafulong/mdPic@vv6/v6/202403052018083.png)

​    需要设置旁路由器的Wan口的IP段要和主路由器的Lan口IP地址段为同一段。例如：主路由器(一级路由器)的LAN口为192.168.1.1，也就是主路由器的网关地址。那么，使用方法一，你的旁路由(二级路由器)的Wan口地址有两种方法，1，使用静态IP地址：则必须将旁路由的Wan口设置为192.168.1.X段。因为是你这个Wan接上一级路由器的Lan，这两个口必须为同一网段。这个X是要在你的主路由器DHCP地址池之外的数字。例如你的主路由器地址池自动分配的地址为192.168.1.100-192.168.1.255，那么你这个X就可以手动设置成2-99之间的任何一个数，笔者为了好记一般都会预留2-10为手动IP保留地址给自己设备静态IP使用。我们这里可以将旁路由(二级路由器)的Wan口IP地址设置为192.168.1.2，接下来要设置旁路由的Lan口网段的IP地址，不能和Wan的IP地址为同一段，路由器路由器，一台机器内部的Wan到Lan这段路怎么走，即便不是一个网段的，那路由器自己也知道，不可能在自己内部还能迷路是不？但同一路由器的Wan口和Lan口是不能设置为同一个网段的，起冲突。我们常说的网关地址，就是Lan口网段上的地址，网关负责转发，好比是我们家外出的门一样。任何信息的出入都要走这个门。上面我们设置旁路由Wan为192.168.1.2，那么Lan口的参数可以设置为静态IP地址。这里我们可以设置为192.168.2.1(192.168.M.1)，192.168.2.1也是旁路由的网关地址，M为非1（0≤M≤254）即可。然后开启DHCP，设置自动分配192.168.2.100-254，网关192.168.2.1，子网掩码255.255.255.0，DNS可以系统自动获取，可以手动设置你们省的DNS，也可以设置为192.168.2.1。

​    以上设置过程中可能会有一些保存重启的情况，遵照系统提示 一步一步来即可。这种设置有优缺点，优点就是可以多使用一个Lan口，一个不浪费，还可以对不同设备进行网段隔离，你的旁路由下面的设备在网络上是相对比较安全的，缺点就是一二级路由器在没有进行静态路由设置的情况下，主路由器上的设备是无法访问旁路由的。例如你家的电视是通过无线连接到旁路由，你的电脑是通过有线连接到主路由器，那么你的电脑就无法访问你的电视，比如我们安装了HDP、电视家等App，无法给他们上传自定义的菜单。需要找同样连接在旁路由的设备去连接电视，在打印机、NAS的共享上也是比较麻烦的，初级玩家很难设置成功，比较繁琐。还有就是有想出greatwall的同学，你台式机用网线接到主路由器上就无法使用旁路由的刷ROM里面的低调上网插件出greatwall了，需要额违禁词语，请勿再发软件。

**二、旁路由器的Lan口接主路由器的Lan口**

![img](https://cdn.jsdelivr.net/gh/mafulong/mdPic@vv6/v6/202403052018127.png)

​    这种接法，就是桥接模式，顾名思义，二者之间用一座桥来连接，那么桥两头很简单了，也没有关卡是不，过一座桥很简单嘛。

​    需要将旁路由的Lan口地址与主路由Lan的地址设置为同一网段。按照上面例子，主路由器的Lan口为192.168.1.1，那么旁路由需要设置为静态IP地址，这里我们设置地址为192.168.1.2。其实很简单的道理，你旁路由的哪个口连接主路由的Lan口，你就要设置哪个口和人家的Lan口IP地址为同一个地址段，遵循这条规则就行了。关闭DHCP功能，完全由主路由器来管理。这种接法好处就是设置简单，且主路由上的电脑也能轻松访问你的旁路由下面的电视等设备，缺点就是牺牲了一个Wan口不使用，还有就是你家的设备直接暴露在一级路由器下面了，相对于上面方法来说没有其安全。

​    **需要额外说明的是，所有路由器的设置，如通过有线设置，均将网线连接主路由器的Lan口设置，手机设置连入Wifi即可。**





多个副路由器，就主路由器LAN→副路由器X2 LAN。



## 路由器无线桥接 WDS

[参考](https://service.mercurycom.com.cn/article-1094.html)

无线桥接仅需要在副路由器上设置，以下操作指导均是在副路由器上进行。



## 模式

[参考](https://zhuanlan.zhihu.com/p/32275116)

一般有AP（接入点）模式、Router（无线路由）模式、Repeater（中继）模式、Bridge（桥接）模式、 Client（客户端）模式。

正常路由器就是router模式。



AP模式与无线路由模式都能提供WIFI功能，本质区别就是交换机与路由器的区别，AP没有单独的子网地址分配功能，使用上级路由分配IP地址，对于家庭用户来说，如果使用老式光猫，需要设置网络供应商（电信、移动等）的帐号密码登陆上网，则必须使用路由模式，这样才能登陆路由后在路由中设备对应帐号密码，才能访问互联网；如果是比较新的光猫，已经不允许用户这样操作了，都是通过光猫带的路由功能从光猫自动获取IP，这种情况下，AP模式或无线路由设置成自动获取IP模式后都能实现WIFI功能，在PC、手机、平板等客户端数量少的情况下，两种模式几乎没有区别。一定要说区别的话，区别在于光猫的路由能力有限，如果客户端数量多，数据量大，光猫可能处理不过来，采用无线路由模式，则光猫只要负责与路由之间一个总通道的数据传输，传到路由器后再由路由器去分发数据，这种情况下，如果买的路由器是台很好的路由器，则无线路由模式会有很大的优势。





**Repeater(中继)模式**

中继模式下，设备可接收远距离的无线信号，再转发一个无线信号。

Repeater，即中继模式：通俗的讲就是可以增强已有的[无线网络](https://zhidao.baidu.com/search?word=无线网络&fr=iknow_pc_qb_highlight)信号，扩大其覆盖范围。可以将路由器安放至原有无线信号的边缘地带，将此无线信号增强。增强后的无线网络的SSID(无线网络名称)和密码与原无线网络相同。并且此信号只可以中继一次，即只能将原信号增强放大，新信号无法再中继放大。适合别墅、会所、广场等面积大的区域使用。

Repeater（中继）模式和Bridge（桥接）模式都是通过无线的方式连接到一台可以上网的无线路由器上，放大该无线路由器上的无线信号；区别在于Repeater（中继）模式下放大后的无线信号名称和之前路由器上的一致，而Bridge（桥接）模式放大后的无线信号名称和之前路由器上的无线信号名称不同。

中继是同一内网，桥接不是同一内网。中继可以实现漫游，常见应用是校园网。



**Client(客户端)模式**

Client(客户端)模式下，设备用来接收其它无线路由器上的无线信号，把无线信号转为有线网络，电脑只能够通过网线连接到路由器上使用。

适用场所：附近有无线信号，并且用户知道该无线信号密码，用户的台式电脑想连接该无线信号上网时使用。

![img](https://cdn.jsdelivr.net/gh/mafulong/mdPic@vv6/v6/202403052035463.webp)



## 硬路由与软路由最主要的区别 

1、硬路由开箱即用，设置完了就可以不管，稳定可靠。但是不能拓展设置。 

2、软路由往往是一个网口一张网卡，缺少硬件NAT，纯靠cpu转发，大流量下CPU发热较大，减少使用寿命。 

3、硬路由往往CPU相对较弱，需要广告过滤、科学上网挂梯子会力不从心，造成路由器卡顿，但大流量转发速度快。 

4、软路由往往不带WIFI模块，使用Wifi就要加大投资或配合硬路由使用。

 5、硬路由存储空间往往有限，难以安装Openwrt等路由程序或安装后效率低下。





Openrwt就是软路由。软路由就是**通过软件系统（比如 OpenWrt 等）实现的路由器**，而硬件是通用的，不要求是专门的硬件，比如你完全可以把自己的电脑、手机、Linux 开发板等设备刷一个路由器系统当普通路由器使用。

## Mesh组网

[参考](https://www.ithome.com/0/492/273.htm)

在Mesh技术出现并普及之前，我们曾经主要采用无线中继的方式来扩大信号覆盖。而Mesh相对于无线中继来说，完全弥补了后者的不足之处，可以说是目前最理想的解决方案。

有线组网是主路由和子路由之间通过网线连接，有线*Mesh*相比对无线*Mesh*更稳定，但无线*Mesh*相比对有线*Mesh*布置更自由和美观。

**Mesh系统配置更加简单**

Mesh系统是⼀个整体，添加Mesh节点和修改Mesh⽹络设置都⾮常简单，修改主节点信息会⾃动同步整个Mesh⽹络中其他的路由器，新增节点也⽆需设置SSID、密码、上级路由器等等信息，接⼊后会自动同步，自动组网。只需要一键即可轻松完成配网，父母小孩都会用。



而⽆线中继需要逐个配置SSID、密码，选择需要中继的⽹络，步骤极其繁琐，门槛较高。

**Mesh系统可以智能组⽹，⾃我修复**

Mesh系统会根据节点数量和⽹络情况，⾃动构建最优的⽹络环境。可根据户型和摆放位置，⾃动组成星状、链状或是菊花状⽹络，使得⽹络中的设备在任何位置都可以有极佳的信号覆盖和⾼速⽹络。

即使其中⼀个节点故障，Mesh⽹络也会⾃动重新建⽴起最优的⽹络环境。

这也是无线中继模式无法做到的，⽆线中继的⽹络拓扑结构是固定的，是由⽤户设置之初就已经定义好的，整个⽹络⽆法保证是最优的效果。⼀台离线后，可能导致此节点后所有的节点瘫痪，而无法自动修复。

**Mesh系统可以智能导航，⽆缝漫游**

Mesh系统是一个整体，它会根据信号强度，⽹络⼲扰和负载情况，⾃动将设备引导到整个⽹络更优的节点路由。整个过程⽆缝漫游，边走边玩游戏、视频通话都不会卡顿。

⽆线中继系统⾥⼏个路由器之间则并不知道彼此的状态，无法主动引导设备连接更好的节点。做不到在⼏个路由器之间⽆缝漫游，设备从主路由连接到中继路由时会出现明显掉线，导致在线游戏和视频都无法顺畅的体验。



## 红米Ax6000

https://www.v2ex.com/t/907801

使用原厂固件 + shellclash. 

固件就是软路由。

https://www.youtube.com/watch?v=1Qq_hfmec3s



shellclash: https://github.com/juewuy/ShellCrash/blob/dev/README_CN.md



安装uu加速器方法： https://www.right.com.cn/forum/thread-8276125-1-1.html



解锁SSH教程https://qust.me/post/ax6000-shellclash/
装插件教程https://uu.163.com/router/direction.html



小米ac2100 开启ssh on mac: https://zhuanlan.zhihu.com/p/260531160

可以直接ssh解锁然后+shellclash: https://zhuanlan.zhihu.com/p/451636593

